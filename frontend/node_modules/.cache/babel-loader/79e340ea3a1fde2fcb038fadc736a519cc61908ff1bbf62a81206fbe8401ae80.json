{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/FORESE/DB_Software/frontend/src/components/FileUploadForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Papa from 'papaparse';\nimport { FileUpload } from '../features/contacts/ContactServices';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FileUploadForm = () => {\n  _s();\n  const queryClient = useQueryClient();\n  const [file, setFile] = useState(null);\n  const [CSVData, setCSVData] = useState();\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const fileUploadMutation = useMutation({\n    mutationFn: () => {\n      return FileUpload(CSVData, sessionStorage.getItem('user'));\n    },\n    onSuccess: data => {\n      //Object.keys(responseData).forEach(v => responseData[v] = 0)\n      // queryClient.invalidateQueries(['contacts'])\n    }\n  });\n  const handleUpload = () => {\n    if (file) {\n      console.log(file);\n      Papa.parse(file, {\n        complete: function (results) {\n          console.log(\"Finished:\", results.data);\n          setCSVData(results.data);\n          fileUploadMutation.mutate();\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col py-12 px-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold text-color1 mb-4 text-center\",\n            children: \"Upload CSV or Excel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center mt-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"myfile\",\n              name: \"myfile\",\n              type: \"file\",\n              accept: \".xls, .xlsx, .csv\",\n              onChange: handleFileChange,\n              className: \" font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUpload,\n              className: \"bg-[#D22B2B] hover:scale-95 focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2\",\n              id: \"submit\",\n              children: \"Upload File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(FileUploadForm, \"T2r6VTjUAcoQnSF6b1XVYRMycqA=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = FileUploadForm;\nexport default FileUploadForm;\n\n// <div>\n// <h2>Upload Excel or CSV File</h2>\n// <input id = \"myfile\" name=\"myfile\" type=\"file\" accept=\".xls, .xlsx, .csv\" onChange={handleFileChange} />\n// <button onClick={handleUpload}>Upload</button>\n// </div>\nvar _c;\n$RefreshReg$(_c, \"FileUploadForm\");","map":{"version":3,"names":["React","useState","Papa","FileUpload","useMutation","useQueryClient","jsxDEV","_jsxDEV","Fragment","_Fragment","FileUploadForm","_s","queryClient","file","setFile","CSVData","setCSVData","handleFileChange","e","target","files","fileUploadMutation","mutationFn","sessionStorage","getItem","onSuccess","data","handleUpload","console","log","parse","complete","results","mutate","children","className","fileName","_jsxFileName","lineNumber","columnNumber","id","name","type","accept","onChange","onClick","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/FORESE/DB_Software/frontend/src/components/FileUploadForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Papa from 'papaparse'\n\nimport { FileUpload } from '../features/contacts/ContactServices';\nimport{ useMutation, useQueryClient} from '@tanstack/react-query'\n\nconst FileUploadForm = () => {\n  const queryClient = useQueryClient()\n  const [file, setFile] = useState(null);\n  const [CSVData, setCSVData] = useState();\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n  const fileUploadMutation = useMutation({\n    mutationFn: ()=>{\n      return FileUpload(CSVData,sessionStorage.getItem('user'))\n    },\n    onSuccess:(data)=>{\n      //Object.keys(responseData).forEach(v => responseData[v] = 0)\n      // queryClient.invalidateQueries(['contacts'])\n\n    }\n})\n\n  const handleUpload = () => {\n    if (file) {\n        console.log(file);\n        Papa.parse(file, {\n            complete: function(results) {\n              console.log(\"Finished:\", results.data);\n\n              setCSVData(results.data)\n              fileUploadMutation.mutate()\n            }}\n          )\n      }\n  };\n  \n  return (\n    <>\n        <div className=''>\n            <div className='container mx-auto'>\n                <div className='flex flex-col py-12 px-12'>\n                    <h3 className='text-xl font-bold text-color1 mb-4 text-center'>Upload CSV or Excel</h3>\n                   \n                    <div className='flex items-center justify-center mt-5'>\n                        <input id = \"myfile\" name=\"myfile\" type=\"file\" accept=\".xls, .xlsx, .csv\" onChange={handleFileChange} className=' font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2'/>\n\n                        <button onClick={handleUpload} className='bg-[#D22B2B] hover:scale-95 focus:outine-none font-medium text-sm rounded-lg px-5 py-2.5 text-center w-full mx-2'\n                        id='submit' >\n                            Upload File\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    \n    \n    </>\n        \n  );\n};\n\nexport default FileUploadForm;\n\n// <div>\n// <h2>Upload Excel or CSV File</h2>\n// <input id = \"myfile\" name=\"myfile\" type=\"file\" accept=\".xls, .xlsx, .csv\" onChange={handleFileChange} />\n// <button onClick={handleUpload}>Upload</button>\n// </div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}